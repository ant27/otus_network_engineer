### Занятие 1. Конспект.

Дата занятия: 26.02.21

#### Базовая настройка сетевых устройств CISCO.

##### Последовательность загрузки коммутатора.

- Загрузка коммутатором из своего неизменяемого ПЗУ (ROM) программы самотестирования POST для тестирования процессора, DRAM и flash-памяти. В случае ошибок при самотестировании загрузка останавливается.
- Загрузка коммутаторм из своего неизменяемого ПЗУ (ROM) начального загрузчика (BOOT), который выполняет низкоуровневую инициалиацию ЦПУ (регистров) и файловой системы flash-памяти.
- Поиск начальным загрузчиком на flash-памяти образа операционной системы IOS, загрузка его в оперативную память и передача ему управления коммутатором. 
По умолчанию, когда не установлено значение переменной BOOT, начальный загрузчик использует для загрузки первый файл на flash-памяти с расширением bin.
 
Командой boot system загрузчику указывается конкретный путь к образу:

`S1#configure terminal`
`S1(config)#boot system flash:c3620-jk9o3s-mz.122-7a.bin`
`S1(config)#boot system flash:c3620-jos56i-l.120-11.bin`
`S1(config)#boot system slot0:c3620-ik9s-mz.122-13.bin`
`S1(config)#boot system rom`
`S1(config)#end`
`S1#copy running-config startup-config`

Следующей командой можно посмотреть все ранее установленные пути к образам:

`S1#show boot`

Следующей командой можно удалить все ранее установленные пути к образам:
`S1#configure terminal`
`S1(config)#no boot system`
`S1(config)#end`
`S1#copy running-config startup-config`

- IOS, загруженная в оперативную память, находит в NVRAM-памяти (особом виде флэш памяти) загрузочную конфигурацию startup-config, которая называется обычно config.text и последовательно выполняет команды из нее. Таким образом инициализируются интерфейсы коммутатора.

##### Индикация коммутатора.
-SYST - индикатор питания и системных ошибок
-RPS - индикатор резервного источника питания
-STAT - индикатор состояния порта
-DUPLEX - индикатор режима порта
-SPEED - индиктаор скорости порта
-PoE - индикатор подачи питания PoE на порт

Для перемещения по порту используется кнопка MODE.

##### Восстановление после сбоя.

- Подключение ПК через консольный кабель к консольному порту.
- Выключение коммутатора
- Включение коммутатора и удерживание кнопки "MODE"
- Изменение индикации индикатора SYST с мигания зеленым цветом, потом желтым, потом сплошное свечение зеленым.
- Отпускание кнопки "MODE"
- В эмуляторе терминала на ПК появится запрос switch или rommon начального загрузчика.

##### Настройка доступа для удаленного управления коммутатором.

- Необходимо настроить виртуальный интерфейс коммутатора (SVI) в определенном VLAN. 
- Затем назначить ему IP адрес.
- Затем назначить ему шлюз по умолчанию.

`S1#configure terminal`
`S1(config)#interface vlan 99`
`S1(config)#ip address 172.17.99.11 255.255.255.0`
`S1(config)#ip default-gateway 172.17.99.1`
`S1#ipv6 address 2001:db8:acad:99::1/64`
`S1#no shutdown`
`S1#end`
`S1#copy running-config startup-config`

- Проверить настроенную конфигурацию можно командой:

`S1#show ip interface brief`
`S1#show ipv6 interface brief`

##### Настройка физических параметров портов коммутатора

По умолчанию на всех современных сетевых устройствах работает автосогласование режима и скорости портов коммутатора.

Задать эти параметры вручную можно командами:

`S1#configure terminal`
`S1(config)#interface FastEthernet 0/1`
`S1(config)#duplex full`
`S1(config)#speed 100`
`S1(config)#end`
`S1#copy running-config startup-config`

- Примечание: настройки режима и скорости должны быть установлены на обоих сторонах линии, так как при ручной настройке автосогласование отключается.

Auto-MDIX - автоматическое определение типа кабельного соединения (прямого или перекрестного).

Должно быть включено по умолчанию, вручную включается командой mdix auto. 

##### Команды проверки коммутатора.

`S1#show interfaces [interface-id]`
`S1#show startup-config`
`S1#show running-config`
`S1#show flash`
`S1#show version`
`S1#show history`
`S1#show ip interface [interface-id]`
`S1#show mac-address-table`

##### Диагностика проблем сетевого доступа.

Вывод команды show interfaces:
- Состояние "down" в первой строке вывода указывает на проблемы на аппаратном уровне (например отсутствие несущей, ошибка автососгласования).
- Состояние "down" во второй строке вывода указывает на проблемы на логическом уровне (например, не работает протокол LACP)

Проблемы на уровне сетевого доступа:
- 

 
